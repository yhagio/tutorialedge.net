<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Creating A Simple Web Server With Golang</title>
	
	
	
  <link rel="stylesheet" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/monokai.min.css">
	<link rel="stylesheet" href="/css/materialize.min.css">
	<link rel="stylesheet" href="/css/style.css">
	
	<meta name="generator" content="Hugo 0.19" />

	
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/js/materialize.min.js"></script>
	<script src="/js/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
	<script async>
			(function (i, s, o, g, r, a, m) {
					i['GoogleAnalyticsObject'] = r;
					i[r] = i[r] || function () {
							(i[r].q = i[r].q || []).push(arguments)
					}, i[r].l = 1 * new Date();
					a = s.createElement(o),
					m = s.getElementsByTagName(o)[0];
					a.async = 1;
					a.src = g;
					m.parentNode.insertBefore(a, m)
			})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
			ga('create', 'UA-10255990-23', 'auto');
			ga('send', 'pageview');
	</script>
</head>
<body>

	<header>
		<nav>
			<div class="nav-wrapper">
				<a class="brand-logo" href="/">TutorialEdge.net</a>
				<a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
				<ul id="nav-mobile" class="right hide-on-med-and-down">
					<li><a href="//about/">About</a></li>
					<li><a href="//get-involved/">Get Involved</a></li>
					<li><a href="//courses/">Courses</a></li>
					<li><a href="//post/">Tutorials</a></li>
				</ul>
				<ul class="side-nav" id="mobile-demo">
					<li><a href="//about/">About</a></li>
					<li><a href="//get-involved/">Get Involved</a></li>
					<li><a href="//courses/">Courses</a></li>
					<li><a href="//post/">Tutorials</a></li>
				</ul>
			</div>
		</nav>
	</header>
<div class="title-bar">
	<div class="container">
		<h1>Creating A Simple Web Server With Golang</h1>
		<p>In this tutorial I&#39;ll be demonstrating how to create a very simple web server using Google&#39;s GoLang programming language.</p>
		
		<a href="/tags/golang"><div class="chip">golang</div></a>
		
		<a href="/tags/server"><div class="chip">server</div></a>
		
	</div>
</div>

<div class="container">
	<div class="row">
		<div class="col l2">
			<div class="sidebar">
     
    <h3>golang</h3>
    <ul> 
      
        <li><a href="/post/golang/reading-console-input-golang/">Reading in Console Input in Golang</a></li>
      
        <li><a href="/post/golang/executing-system-commands-with-golang/">Executing System Commands With Golang</a></li>
      
        <li><a href="/post/golang/creating-simple-web-server-with-golang/">Creating A Simple Web Server With Golang</a></li>
      
        <li><a href="/post/golang/creating-restful-api-with-golang/">Creating a RESTful API With Golang</a></li>
      
        <li><a href="/post/golang/sending-email-using-go-and-mailgun/">Sending Email Using Go And Mailgun</a></li>
      
        <li><a href="/post/golang/implementing-bubble-sort-with-golang/">Implementing the Bubble Sort Algorithm using Golang</a></li>
      
        <li><a href="/post/golang/writing-a-twitter-bot-golang/">Writing A Twitter Bot in Golang</a></li>
      
        <li><a href="/post/golang/golang-mysql-tutorial/">Golang MySQL Tutorial</a></li>
      
        <li><a href="/post/golang/golang-integer-string-conversion-tutorial/">Golang Integer String Conversion Tutorial</a></li>
      
        <li><a href="/post/golang/parsing-xml-with-golang/">Parsing XML Files With Golang</a></li>
      
    </ul>
    

</div> 
		</div>
		<div class="col l8">	
			<article>
				<div class="info">Author: Elliot Forbes | Posted at: 15.04.2017 08:46</div>
				<div>
					

<p>In this tutorial we&rsquo;ll be focusing on creating a very simple web server using the <a href="https://golang.org/pkg/net/http/">net/http</a> package. If you&rsquo;ve ever used something like Node&rsquo;s ExpressJS or Python&rsquo;s Tornado, then you should hopefully see some similarities to how things are handled.</p>

<h2 id="creating-a-basic-web-server">Creating a Basic Web Server</h2>

<p>Ok, so to begin with we’ll create a very simple web server that will just return whatever the URL path is of your query. This will be a good base from which we can build on top of.</p>

<pre><code class="language-go">package main

import (
    &quot;fmt&quot;
    &quot;html&quot;
    &quot;log&quot;
    &quot;net/http&quot;
)

func main() {

    http.HandleFunc(&quot;/&quot;, func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprintf(w, &quot;Hello, %q&quot;, html.EscapeString(r.URL.Path))
    })
    
    http.HandleFunc(&quot;/hi&quot;, func(w http.ResponseWriter, r *http.Request){
        fmt.Fprintf(w, &quot;Hi&quot;)
    })

    log.Fatal(http.ListenAndServe(&quot;:8081&quot;, nil))

}
</code></pre>

<p>In the above code we essentially define two different Handlers. These handlers are what respond to any http request that match the string pattern we define as the first parameter. So essentially whenever a request is made for the home page or <em><a href="http://localhost:8081/">http://localhost:8081/</a></em>, we&rsquo;ll see our first handler respond as the query matches that pattern.</p>

<h2 id="running-our-server">Running Our Server</h2>

<p>Ok so now that we&rsquo;ve created our own very simplistic server we can try running it by typing go run server.go into our console. This usually asks me for permission so accept that and then head over to your browser and head to <a href="http://localhost:8081/world">http://localhost:8081/world</a>. On this page you should hopefully see your query string echoed back to you in true &ldquo;hello world&rdquo; fashion.</p>

<h2 id="adding-a-bit-of-complexity">Adding a bit of Complexity</h2>

<p>So now that we&rsquo;ve got a basic web server set up, let&rsquo;s try incrementing a counter every time a specific url is hit. Due to the fact that the web server is asynchronous, we&rsquo;ll have to guard our counter using a mutex in order to prevent us from being hit with race-condition bugs.</p>

<pre><code class="language-go">package main

import (
	&quot;fmt&quot;
	&quot;log&quot;
	&quot;net/http&quot;
	&quot;strconv&quot;
	&quot;sync&quot;
)

var counter int
var mutex = &amp;sync.Mutex{}

func echoString(w http.ResponseWriter, r *http.Request) {
	fmt.Fprintf(w, &quot;hello&quot;)
}

func incrementCounter(w http.ResponseWriter, r *http.Request) {
	mutex.Lock()
	counter++
	fmt.Fprintf(w, strconv.Itoa(counter))
	mutex.Unlock()
}

func main() {
	http.HandleFunc(&quot;/&quot;, echoString)

	http.HandleFunc(&quot;/increment&quot;, incrementCounter)

	http.HandleFunc(&quot;/hi&quot;, func(w http.ResponseWriter, r *http.Request) {
		fmt.Fprintf(w, &quot;Hi&quot;)
	})

	log.Fatal(http.ListenAndServe(&quot;:8081&quot;, nil))

}

</code></pre>

<p>Run this and then navigate to <a href="http://localhost:8081/increment">http://localhost:8081/increment</a> and you should see the current count which will be locked, incremented and then unlocked every time you make a request to that page.</p>

<h2 id="serving-static-files">Serving Static Files</h2>

<p>Ok, so now that we&rsquo;ve set up a simple server in go, it&rsquo;s time to start serving some static files. Create a static folder within your project&rsquo;s directory and then create some simple html files. For this example I&rsquo;m just serving back the following:</p>

<pre><code class="language-html">&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Hello World&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h2&gt;Hello World!&lt;/h2&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Once you&rsquo;ve got this then we can then modify our web server code to use the http.ServeFile method. Essentially this will take in the url of the request made to the server, and if it contains say index.html then it would return the index.html file, rendered as html in the browser. If we were to create an edit.html page and send a request to <a href="http://localhost:8081/edit.html">http://localhost:8081/edit.html</a> then it would return whatever html content you choose to put in that edit.html page.</p>

<pre><code class="language-go">package main

import (
	&quot;fmt&quot;
	&quot;log&quot;
	&quot;net/http&quot;
)

func main() {

	http.HandleFunc(&quot;/&quot;, func(w http.ResponseWriter, r *http.Request) {
		http.ServeFile(w, r, r.URL.Path[1:])
	})

	http.HandleFunc(&quot;/hi&quot;, func(w http.ResponseWriter, r *http.Request) {
		fmt.Fprintf(w, &quot;Hi&quot;)
	})

	log.Fatal(http.ListenAndServe(&quot;:8081&quot;, nil))

}
</code></pre>

<h2 id="checking-it-works">Checking it Works</h2>

<p>Again run the server and navigate to <a href="http://localhost:8081/index.html">http://localhost:8081/index.html</a> and you should hopefully see your very simple index.html file rendered in all it&rsquo;s glory.</p>

<p>I hope you found this tutorial useful and if you did then please let me know in the comments section below! This is part one of a series of GoLang tutorials in which we play around with APIs and creating servers so stay tuned for more!</p>

<blockquote>
<p>Recommended Reading: If you wanted to say display a blog then connecting to a database is vital: <a href="https://tutorialedge.net/go-mysql-tutorials">Go MySQL Tutorial</a></p>
</blockquote>

				</div>
				<div>
					<div id="disqus_thread"></div>
<script>





(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://tutorialedge.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
				</div>
			</article>
		</div>

		<div class="col l2">
			<div class="wrapper">
    <div class="container">
      <img src="https://twitter.com/Elliot_F/profile_image?size=original" alt="Elliot Forbes" class="trophy" />
      <h1>Elliot Forbes</h1>
      <span class="score">Follow me:</span>
  
      <div class="buttons">
          <a href="https://twitter.com/Elliot_F" target="_blank" class="button light">
              <span><i class="ion ion-social-twitter"></i> Twitter</span>
          </a>
      </div>
    </div>
</div>

		</div>
		
	</div>
</div>

<div class="join-us">
	<div class="container">
		<div class="row">
			<div class="col l8">
				<h5>Become a Contributor!</h5>
				<p>Think you could improve the articles on this site? Feel free to submit a pull request to the sites github repo.</p>
			</div>
			<div class="col l4">
				<a href="https://github.com/elliotforbes/tutorialedge-v2"><button class="btn valign">Fork Our Repo</button></a>
			</div>
		</div>
	</div>
</div>

<footer class="page-footer">
	<div class="container">
		<div class="row">
			<div class="col l6 s12">
				<h5>TutorialEdge.net</h5>
				<p class="text-lighten-4">This site is dedicated to bringing you the highest quality courses designed to teach you the ins and outs of programming with various frameworks and programming languages.</p>
			</div>
			<div class="col l4 offset-l2 s12">
				<h5>Links</h5>
				<ul>
					<li><a class="text-lighten-3" href="/tutorials">All Tutorials</a></li>
					<li><a class="text-lighten-3" href="/books">Books</a></li>
					<li><a class="text-lighten-3" href="/contact">Contact</a></li>
					<li><a class="text-lighten-3" href="/courses">Courses</a></li>
					<li><a class="text-lighten-3" href="/blog">Blog</a></li>
					<li><a class="text-lighten-3" href="/about">About</a></li>
					
				</ul>
			</div>
		</div>
	</div>
	<div class="footer-copyright">
		<div class="container">
		TutorialEdge © 2016 Copyright 
		</div>
	</div>
</footer>

<script>
$(".button-collapse").sideNav();
</script>